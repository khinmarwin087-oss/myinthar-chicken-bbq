<!DOCTYPE html>
<html lang="my">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6N321JW2GM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6N321JW2GM');
</script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ— á€™á€¼á€„á€ºá€á€¬á€€á€¼á€€á€ºá€€á€„á€º POS</title>
    <link href="https://fonts.googleapis.com/css2?family=Pyidaungsu:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --pearl: #ffffff; --bg: #f1f5f9; --accent: #f59e0b; --text: #1e293b; --sub: #64748b; --danger: #ef4444; }
        body { font-family: 'Pyidaungsu', sans-serif; background: var(--bg); margin: 0; padding-bottom: 90px; color: var(--text); font-size: 14px; }

        /* Top Nav */
        .top-nav { background: var(--pearl); padding: 15px 12px; position: sticky; top: 0; z-index: 100; border-radius: 0 0 20px 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .top-nav h2 { font-size: 18px; margin: 0 0 10px; text-align: center; }
        .search-box { background: #f8fafc; border-radius: 10px; padding: 2px 10px; display: flex; align-items: center; border: 1px solid #e2e8f0; margin-bottom: 5px; }
        .search-box input { border: none; background: transparent; padding: 8px; width: 100%; outline: none; font-size: 12px; }
        .cat-row { display: flex; overflow-x: auto; gap: 6px; padding: 12px 0 2px; scrollbar-width: none; }
        .cat-btn { background: var(--pearl); border: 1px solid #e2e8f0; padding: 6px 14px; border-radius: 10px; white-space: nowrap; font-size: 12px; font-weight: bold; cursor: pointer; }
        .cat-btn.active { background: var(--accent); color: white; border-color: var(--accent); }

        /* Grid */
        .container { padding: 10px; max-width: 500px; margin: auto; }
        .menu-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .card { background: var(--pearl); border-radius: 15px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.02); border: 1px solid #edf2f7; }
        .card-img { width: 100%; height: 100px; object-fit: cover; background: #eee; }
        .card-info { padding: 10px; text-align: center; }
        .item-name { font-weight: 700; font-size: 13px; display: block; height: 32px; margin-bottom: 4px; overflow: hidden; }
        .item-price { color: var(--accent); font-weight: 800; font-size: 14px; }
        .btn-add { width: 100%; padding: 8px; margin-top: 8px; border: none; background: #fff8eb; color: #b45309; border-radius: 10px; font-weight: bold; font-size: 12px; cursor: pointer; }

        /* Floating Bar */
        .cart-bar { position: fixed; bottom: 15px; left: 10px; right: 10px; background: #1e293b; color: white; padding: 12px 18px; border-radius: 18px; display: flex; justify-content: space-between; align-items: center; max-width: 480px; margin: auto; z-index: 90; }

        /* Modal & Cart Item */
        .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.4); z-index: 200; backdrop-filter: blur(4px); }
        .modal-sheet { background: var(--pearl); position: absolute; bottom: 0; left: 0; right: 0; border-radius: 25px 25px 0 0; max-height: 90vh; overflow: hidden; max-width: 500px; margin: auto; display: flex; flex-direction: column; }
        .modal-header { padding: 15px; background: white; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #f1f5f9; z-index: 210; }
        .modal-body { flex: 1; overflow-y: auto; padding: 0 15px 20px; scroll-behavior: smooth; }
        .back-btn { background: #f1f5f9; border: none; width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        
        .cart-item { display: flex; align-items: center; gap: 8px; padding: 6px 0; border-bottom: 1px solid #f1f5f9; }
        .cart-item-img { width: 35px; height: 35px; border-radius: 6px; object-fit: cover; background: #f1f5f9; }
        .cart-item-info { flex: 1; min-width: 0; }
        .cart-item-info b { font-size: 12px; line-height: 1.2; display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .cart-item-info span { font-size: 13px; color: var(--accent); font-weight: bold; }
        .cart-total-row { text-align: right; padding: 15px 0 5px; font-weight: 800; font-size: 14px; border-top: 1px solid #eee; margin-top: 5px; }

        /* Input Controls */
        .qty-group { display: flex; align-items: center; background: #ffffff; border-radius: 6px; border: 1px solid #e2e8f0; height: 26px; overflow: hidden; }
        .btn-q { width: 24px; height: 26px; border: none; background: white; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 14px; }
        .val-q { width: 28px; height: 26px; border: none; background: transparent; text-align: center; font-weight: 800; font-size: 12px; outline: none; line-height: 26px; padding: 0; margin: 0; }
        .btn-del { color: var(--danger); background: #fff1f2; border: none; width: 26px; height: 26px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 12px; }
        
        #form-box { border-top: 2px dashed #e2e8f0; margin-top: 15px; padding-top: 15px; }
        .form-card { background: #f8fafc; border-radius: 18px; padding: 15px; border: 1px solid #e2e8f0; }
        label { font-size: 11px; font-weight: bold; color: var(--sub); margin-bottom: 5px; display: block; }
        input { width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 10px; margin-bottom: 12px; box-sizing: border-box; font-size: 14px; }
        .date-choices { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 12px; }
        .date-chip { background: white; border: 1px solid #cbd5e1; padding: 10px; border-radius: 10px; text-align: center; font-size: 13px; font-weight: bold; cursor: pointer; }
        .date-chip.active { background: #fff8eb; border-color: var(--accent); color: #b45309; }
        
        .btn-main { width: 100%; padding: 14px; background: var(--accent); color: white; border: none; border-radius: 15px; font-weight: 800; font-size: 15px; cursor: pointer; }
        .btn-s { border: none; padding: 12px; border-radius: 12px; color: white; font-weight: bold; width: 100%; margin-top: 10px; cursor: pointer; }
        .alert-pop { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; width: 80%; max-width: 300px; padding: 25px 20px; border-radius: 20px; z-index: 1000; text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.2); }
    /* Loading Spinner Style */
.spinner {
    display: none; /* á€•á€¯á€¶á€™á€¾á€”á€ºá€†á€­á€¯á€›á€„á€º á€–á€»á€±á€¬á€€á€ºá€‘á€¬á€¸á€™á€šá€º */
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255,255,255,0.3);
    border-radius: 50%;
    border-top-color: #fff;
    animation: spin 1s ease-in-out infinite;
    margin-left: 10px;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* á€á€œá€¯á€á€ºá€”á€¾á€­á€•á€ºá€”á€±á€…á€‰á€º style */
.btn-s.loading {
    pointer-events: none;
    opacity: 0.8;
    display: flex;
    align-items: center;
    justify-content: center;
}

</style>
</head>
<body>

<div class="top-nav">
    <h2>ğŸ— á€™á€¼á€„á€ºá€á€¬á€€á€¼á€€á€ºá€€á€„á€º</h2>
    <div class="search-box">
        <i class="fa-solid fa-magnifying-glass" style="color:#94a3b8; font-size: 12px;"></i>
        <input type="text" id="searchInput" placeholder="á€›á€¾á€¬á€–á€½á€±á€›á€”á€º..." onkeyup="renderMenu()">
    </div>
    <div class="cat-row">
        <div class="cat-btn active" onclick="filterCat('All', this)">á€¡á€¬á€¸á€œá€¯á€¶á€¸</div>
        <div class="cat-btn" onclick="filterCat('á€¡á€á€¬á€¸', this)">á€¡á€á€¬á€¸</div>
        <div class="cat-btn" onclick="filterCat('á€¡á€›á€­á€¯á€¸', this)">á€¡á€›á€­á€¯á€¸</div>
        <div class="cat-btn" onclick="filterCat('á€€á€œá€®á€…á€¬', this)">á€€á€œá€®á€…á€¬</div>
        <div class="cat-btn" onclick="filterCat('á€¡á€á€®á€¸á€¡á€›á€½á€€á€º', this)">á€¡á€á€®á€¸á€¡á€›á€½á€€á€º</div>
        <div class="cat-btn" onclick="filterCat('á€¡á€›á€±á€á€½á€¶', this)">á€¡á€›á€±á€á€½á€¶</div>
        <div class="cat-btn" onclick="filterCat('á€¥', this)">á€¥</div>
    </div>
</div>

<div class="container">
    <div id="grid-box" class="menu-grid"></div>
</div>

<div class="cart-bar" id="cart-bar" style="display: none;">
    <div>á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸: <b id="bar-total">0</b> Ks</div>
    <button style="background:var(--accent); border:none; color:white; padding:8px 16px; border-radius:10px; font-weight:800; font-size:13px;" onclick="openCart()">á€á€¼á€„á€ºá€¸á€á€±á€¬á€„á€ºá€¸ â”</button>
</div>

<div id="cart-sheet" class="overlay">
    <div class="modal-sheet">
        <div class="modal-header">
            <div style="display:flex; align-items:center;">
                <button class="back-btn" id="modal-back"><i class="fa-solid fa-arrow-left"></i></button>
                <h3 id="modal-title" style="margin:0 0 0 10px; font-size: 16px;">á€á€¼á€„á€ºá€¸á€á€±á€¬á€„á€ºá€¸á€…á€¬á€›á€„á€ºá€¸</h3>
            </div>
            <span id="item-count-badge" style="background:#f1f5f9; padding:5px 12px; border-radius:12px; font-weight:bold; font-size:14px; color:#1e293b;">0 á€™á€»á€­á€¯á€¸</span>
        </div>
        
        <div class="modal-body" id="modal-scroll-area">
            <div id="cart-list"></div>
            <div id="form-box" style="display: none;">
                <div class="form-card">
                    <label>ğŸ‘¤ á€á€šá€ºá€á€°á€¡á€™á€Šá€º</label>
                    <input type="text" id="in-name" placeholder="á€¡á€™á€Šá€ºá€–á€¼á€Šá€·á€ºá€•á€«">
                    <label>ğŸ“ á€–á€¯á€”á€ºá€¸á€”á€¶á€•á€«á€á€º</label>
                    <input type="tel" id="in-phone" placeholder="á€á‰...">
                    <label>ğŸ“… á€›á€€á€ºá€…á€½á€²</label>
                    <div class="date-choices">
                        <div class="date-chip active" id="chip-today" onclick="selectDate('today')">á€’á€®á€”á€±á€·</div>
                        <div class="date-chip" id="chip-other" onclick="selectDate('other')">á€á€á€¼á€¬á€¸á€›á€€á€º</div>
                    </div>
                    <div id="custom-date-row" style="display:none;">
                        <label>ğŸ—“ï¸ á€›á€€á€ºá€…á€½á€²</label>
                        <input type="date" id="in-date">
                    </div>
                    <label>ğŸ•’ á€¡á€á€»á€­á€”á€º</label>
                    <input type="time" id="in-time">
                    
                    <div style="padding: 10px; border: 1px solid #ddd; border-radius: 12px; background: #fff; margin-bottom: 10px;">
                        <p style="font-size: 13px; color: #555; margin: 0; line-height: 1.5;">
                            ğŸ“œ á€¡á€±á€¬á€ºá€’á€«á€á€„á€ºá€•á€¼á€®á€¸ <strong>(á…) á€™á€­á€”á€…á€ºá€¡á€á€½á€„á€ºá€¸</strong> á€†á€­á€¯á€„á€ºá€™á€¾ á€¡á€€á€¼á€±á€¬á€„á€ºá€¸á€™á€•á€¼á€”á€ºá€•á€«á€€ á€–á€¯á€”á€ºá€¸á€†á€€á€ºá€•á€±á€¸á€•á€«á€›á€”á€º á€™á€±á€á€¹á€á€¬á€›á€•á€ºá€á€¶á€¡á€•á€ºá€•á€«á€á€Šá€ºá‹
                        </p>
                    </div>
                    <div style="display:flex; gap:10px;">        
    <button id="btn-viber" class="btn-s" style="background:#7360f2;" onclick="sendOrder('viber')">
        <i class="fa-brands fa-viber"></i> Viber <div class="spinner" id="spin-viber"></div>
    </button>
    <button id="btn-tele" class="btn-s" style="background:#0088cc;" onclick="sendOrder('tele')">
        <i class="fa-brands fa-telegram"></i> Telegram <div class="spinner" id="spin-tele"></div>
    </button>
</div>

                    </div>
                </div>
            </div>
            <button id="next-btn" class="btn-main" style="margin-top:20px;" onclick="step2()">á€¡á€±á€¬á€ºá€’á€«á€á€„á€ºá€™á€Šá€º â”</button>
        </div>
    </div>
</div>

<div id="alert-bg" class="overlay" style="z-index: 999;"></div>
<div id="alert-pop" class="alert-pop">
    <p id="alert-msg" style="font-weight:bold;"></p>
    <button class="btn-main" onclick="closeAlert()">á€”á€¬á€¸á€œá€Šá€ºá€•á€«á€•á€¼á€®</button>
</div>

<script>
    const MY_PHONE = "959767287345";
    const WEB_LINK = window.location.href;
    const BOT_TOKEN = "8215695761:AAF1qDjAJn7gjiHyzf8t7W6c8e51cim98sU";
    const CHAT_ID = "8116152317";

    const menuData = [
        { id: 1, name: 'á€€á€¼á€€á€ºá€•á€±á€«á€„á€º', price: 4000, category: 'á€¡á€á€¬á€¸', image: 'https://i.ibb.co/JWsqDFX9/1768228481848.png' },
        { id: 2, name: 'á€€á€¼á€€á€ºá€›á€„á€ºá€¡á€¯á€¶', price: 4000, category: 'á€¡á€á€¬á€¸', image: '' },
        { id: 3, name: 'á€†á€­á€á€ºá€á€¬á€¸á€€á€„á€º', price: 1500, category: 'á€¡á€á€¬á€¸', image: 'https://i.ibb.co/twQjTScV/IMG-20251231-003231.png' },
        { id: 4, name: 'á€¡á€á€¬á€¸ á€á€»á€±á€¬á€„á€ºá€¸(á€€á€¼á€€á€º)', price: 800, category: 'á€¡á€á€¬á€¸', image: 'https://i.ibb.co/rRd5P91j/1767118697374.png' },
        { id: 5, name: 'á€¡á€›á€±á€á€½á€¶', price: 500, category: 'á€¡á€›á€±á€á€½á€¶', image: 'https://i.ibb.co/MkJqnDyG/1767147480724.png' },
        { id: 6, name: 'á€¡á€á€±á€¬á€„á€ºá€•á€»á€¶', price: 500, category: 'á€¡á€›á€­á€¯á€¸', image: 'https://i.ibb.co/rKJY26TM/1767147666947.png' },
        { id: 7, name: 'á€¡á€á€±á€¬á€„á€ºá€•á€»á€¶ (CP)', price: 1000, category: 'á€¡á€›á€­á€¯á€¸', image: '' },
        { id: 8, name: 'á€¡á€°', price: 500, category: 'á€€á€œá€®á€…á€¬', image: '' },
        { id: 9, name: 'á€á€±á€«á€„á€ºá€¸', price: 300, category: 'á€¡á€›á€­á€¯á€¸', image: '' },
        { id: 10, name: 'á€œá€Šá€º á€á€»á€±á€¬á€„á€ºá€¸', price: 300, category: 'á€¡á€›á€­á€¯á€¸', image: 'https://i.ibb.co/bjL850PP/1768208169381.png' },
        { id: 11, name: 'á€¡á€á€Šá€ºá€¸á€™á€¼á€…á€º', price: 500, category: 'á€€á€œá€®á€…á€¬', image: 'https://i.ibb.co/twRsK5S7/1767147537379.png' },
        { id: 12, name: 'á€á€¼á€±á€‘á€±á€¬á€€á€º', price: 300, category: 'á€¡á€›á€­á€¯á€¸', image: '' },
        { id: 13, name: 'á€á€¼á€±á€‘á€±á€¬á€€á€º(CP)', price: 700, category: 'á€¡á€›á€­á€¯á€¸', image: '' },
        { id: 14, name: 'á€œá€€á€ºá€™á€±á€¬á€„á€ºá€¸á€œá€¯á€¶á€¸', price: 1000, category: 'á€¡á€á€¬á€¸', image: '' },
        { id: 15, name: 'á€¡á€†á€®á€•á€°á€¸', price: 800, category: 'á€¡á€›á€±á€á€½á€¶', image: 'https://i.ibb.co/PGcW9j6r/1767118749960.png' },
        { id: 16, name: 'á€¡á€á€¬á€¸á€á€¯', price: 400, category: 'á€¡á€á€®á€¸á€¡á€›á€½á€€á€º', image: 'https://i.ibb.co/hpPRPDr/1768208099763.png' },
        { id: 17, name: 'á€›á€¯á€¶á€¸á€•á€á€±á€á€®á€¸', price: 300, category: 'á€¡á€á€®á€¸á€¡á€›á€½á€€á€º', image: 'https://i.ibb.co/cSCzCKN5/1768228376693.png' },
        { id: 18, name: 'á€¡á€•á€ºá€™á€¾á€­á€¯', price: 1000, category: 'á€¡á€á€®á€¸á€¡á€›á€½á€€á€º', image: 'https://i.ibb.co/PsGSSTK4/1768228089572.png' },
        { id: 19, name: 'á€„á€¯á€¶á€¸á€¥', price: 1000, category: 'á€¥', image: 'https://i.ibb.co/xtyy8V0N/1768211447515.png' }
    ];

    let cart = {};
    let activeCat = 'All', chosenDay = 'today';

    function renderMenu() {
        const q = document.getElementById('searchInput').value.toLowerCase();
        const grid = document.getElementById('grid-box');
        const items = menuData.filter(i => (activeCat === 'All' || i.category === activeCat) && i.name.toLowerCase().includes(q));
        grid.innerHTML = items.map(i => `
            <div class="card">
                <img src="${i.image || 'https://via.placeholder.com/150'}" class="card-img">
                <div class="card-info">
                    <span class="item-name">${i.name}</span>
                    <span class="item-price">${i.price} Ks</span>
                    <button class="btn-add" onclick="addToCart(${i.id})">+ á€‘á€Šá€·á€ºá€™á€Šá€º</button>
                </div>
            </div>`).join('');
    }

    function filterCat(c, el) {
        activeCat = c;
        document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
        el.classList.add('active');
        renderMenu();
    }

    function addToCart(id) { cart[id] = (cart[id] || 0) + 1; updateFloatingBar(); }
    function updateFloatingBar() {
        let t = 0;
        for (let id in cart) t += cart[id] * menuData.find(m => m.id == id).price;
        document.getElementById('cart-bar').style.display = t > 0 ? 'flex' : 'none';
        document.getElementById('bar-total').innerText = t.toLocaleString();
    }

    function openCart() {
        const list = document.getElementById('cart-list');
        let html = '', total = 0, count = 0;
        for (let id in cart) {
            const item = menuData.find(m => m.id == id);
            total += item.price * cart[id];
            count++;
            html += `
            <div class="cart-item">
                <img src="${item.image || 'https://via.placeholder.com/50'}" class="cart-item-img">
                <div class="cart-item-info">
                    <b>${item.name}</b>
                    <span>${item.price.toLocaleString()} Ks</span>
                </div>
                <div style="display:flex; align-items:center; gap:8px;">
                    <div class="qty-group">
                        <button class="btn-q" onclick="changeQty(${id}, -1)">-</button>
                        <input type="number" class="val-q" value="${cart[id]}" onchange="manualQty(${id}, this.value)">
                        <button class="btn-q" onclick="changeQty(${id}, 1)">+</button>
                    </div>
                    <button class="btn-del" onclick="removeItem(${id})"><i class="fa-regular fa-trash-can"></i></button>
                </div>
            </div>`;
        }
        document.getElementById('item-count-badge').innerText = count + " á€™á€»á€­á€¯á€¸";
        list.innerHTML = html + '<div class="cart-total-row">á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸: <span style="color:var(--accent); font-size: 18px; margin-left: 5px;">' + total.toLocaleString() + '</span> Ks</div>';
             
        document.getElementById('cart-sheet').style.display = 'block';
        document.getElementById('form-box').style.display = 'none';
        document.getElementById('cart-list').style.display = 'block';
        document.getElementById('next-btn').style.display = 'block';
        document.getElementById('modal-title').innerText = "á€á€¼á€„á€ºá€¸á€á€±á€¬á€„á€ºá€¸á€…á€¬á€›á€„á€ºá€¸";
        document.getElementById('modal-back').onclick = () => { document.getElementById('cart-sheet').style.display = 'none'; };
    }

    function removeItem(id) { delete cart[id]; if (Object.keys(cart).length === 0) document.getElementById('cart-sheet').style.display = 'none'; else openCart(); updateFloatingBar(); }
    function changeQty(id, d) { cart[id] += d; if (cart[id] <= 0) delete cart[id]; if (Object.keys(cart).length === 0) document.getElementById('cart-sheet').style.display = 'none'; else openCart(); updateFloatingBar(); }
    function manualQty(id, v) { let n = parseInt(v); if (n <= 0 || isNaN(n)) delete cart[id]; else cart[id] = n; if (Object.keys(cart).length === 0) document.getElementById('cart-sheet').style.display = 'none'; else openCart(); updateFloatingBar(); }
    
    function selectDate(day) { chosenDay = day; document.getElementById('chip-today').classList.toggle('active', day === 'today'); document.getElementById('chip-other').classList.toggle('active', day === 'other'); document.getElementById('custom-date-row').style.display = day === 'other' ? 'block' : 'none'; }
    function myPop(m) { document.getElementById('alert-msg').innerText = m; document.getElementById('alert-bg').style.display = 'block'; document.getElementById('alert-pop').style.display = 'block'; }
    function closeAlert() { document.getElementById('alert-bg').style.display = 'none'; document.getElementById('alert-pop').style.display = 'none'; }

    function step2() { 
        document.getElementById('form-box').style.display = 'block'; 
        document.getElementById('next-btn').style.display = 'none'; 
        document.getElementById('modal-title').innerText = "á€¡á€á€»á€€á€ºá€¡á€œá€€á€ºá€–á€¼á€Šá€·á€ºá€•á€«"; 
        
        // Back á€á€œá€¯á€á€ºá€”á€¾á€­á€•á€ºá€›á€„á€º Form á€•á€¼á€”á€ºá€•á€­á€á€ºá€•á€¼á€®á€¸ Cart list á€€á€­á€¯á€•á€² á€™á€¼á€„á€ºá€›á€¡á€±á€¬á€„á€º á€•á€¼á€”á€ºá€œá€¯á€•á€ºá€•á€±á€¸á€™á€šá€º
        document.getElementById('modal-back').onclick = () => {
            document.getElementById('form-box').style.display = 'none';
            document.getElementById('next-btn').style.display = 'block';
            document.getElementById('modal-title').innerText = "á€á€¼á€„á€ºá€¸á€á€±á€¬á€„á€ºá€¸á€…á€¬á€›á€„á€ºá€¸";
            // Modal Back á€€á€­á€¯ á€”á€‚á€­á€¯á€¡á€á€­á€¯á€„á€ºá€¸ Cart á€•á€­á€á€ºá€á€²á€·á€¡á€œá€¯á€•á€º á€•á€¼á€”á€ºá€•á€±á€¸á€™á€šá€º
            document.getElementById('modal-back').onclick = () => { document.getElementById('cart-sheet').style.display = 'none'; };
        };

        // Form á€†á€®á€€á€­á€¯ Scroll á€†á€½á€²á€á€»á€™á€šá€º
        setTimeout(() => {
            document.getElementById('form-box').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 100);
    }
    
    async function sendOrder(via) {
    const name = document.getElementById('in-name').value;
    const phone = document.getElementById('in-phone').value;
    const time = document.getElementById('in-time').value;
    const otherDate = document.getElementById('in-date').value;
    
    if(!name || !phone || !time) return myPop("á€¡á€á€»á€€á€ºá€¡á€œá€€á€ºá€á€½á€± á€•á€¼á€Šá€·á€ºá€…á€¯á€¶á€¡á€±á€¬á€„á€º á€–á€¼á€Šá€·á€ºá€•á€±á€¸á€•á€« âœ¨");

    // --- Loading á€…á€á€„á€ºá€á€¼á€„á€ºá€¸ ---
    const btn = via === 'viber' ? document.getElementById('btn-viber') : document.getElementById('btn-tele');
    const spin = via === 'viber' ? document.getElementById('spin-viber') : document.getElementById('spin-tele');
    
    btn.classList.add('loading');
    spin.style.display = 'inline-block';
    // ------------------------

    let dayStr = chosenDay === 'today' ? "á€’á€®á€”á€±á€· (Today)" : otherDate;
    let items = [];
    for(let id in cart) {
        const i = menuData.find(m => m.id == id);
        items.push(`â–ªï¸ ${i.name} (${cart[id]} á€á€¯)`);
    }
    const total = document.getElementById('bar-total').innerText;
    const msg = `ğŸ— *á€™á€¼á€„á€ºá€á€¬á€€á€¼á€€á€ºá€€á€„á€º - á€¡á€±á€¬á€ºá€’á€«*\nğŸ‘¤ *á€¡á€™á€Šá€º:* ${name}\nğŸ“ *á€–á€¯á€”á€ºá€¸:* ${phone}\nğŸ“… *á€”á€±á€·á€›á€€á€º:* ${dayStr}\nğŸ•’ *á€¡á€á€»á€­á€”á€º:* ${time}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”\n${items.join('\n')}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ’° *á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸:* *${total} MMK*\n\nğŸ›’ *á€•á€¼á€”á€ºá€œá€Šá€ºá€™á€¾á€¬á€šá€°á€›á€”á€ºá€”á€¾á€­á€•á€ºá€•á€«* ğŸ‘‡\n${WEB_LINK}`;

    try {
        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ chat_id: CHAT_ID, text: msg, parse_mode: 'Markdown' })
        });

        // á€á€á€…á€±á€¬á€„á€·á€ºá€•á€¼á€®á€¸á€™á€¾ á€•á€­á€á€ºá€•á€±á€¸á€™á€šá€º (Animation á€•á€¼á€á€»á€„á€ºá€œá€­á€¯á€·)
        setTimeout(() => {
            btn.classList.remove('loading');
            spin.style.display = 'none';

            if(via === 'viber') {
                navigator.clipboard.writeText(msg).then(() => {
                    myPop("Copy á€€á€°á€¸á€•á€¼á€®á€¸á€•á€«á€•á€¼á€®á‹ Viber á€™á€¾á€¬ Paste á€œá€¯á€•á€ºá€•á€¼á€®á€¸ á€•á€­á€¯á€·á€•á€±á€¸á€•á€«!");
                    setTimeout(() => { window.location.href = `viber://chat?number=%2B${MY_PHONE}`; }, 1200);
                });
            } else {
                window.location.href = `https://t.me/+${MY_PHONE}?text=${encodeURIComponent(msg)}`;
            }
            cart = {}; updateFloatingBar(); document.getElementById('cart-sheet').style.display = 'none';
        }, 1000); // á á€…á€€á€¹á€€á€”á€·á€ºá€œá€±á€¬á€€á€º á€œá€Šá€ºá€•á€¼á€™á€šá€º

    } catch (e) { 
        btn.classList.remove('loading');
        spin.style.display = 'none';
        myPop("Error! Bot á€†á€®á€á€­á€¯á€· á€¡á€±á€¬á€ºá€’á€«á€•á€­á€¯á€·á€™á€›á€•á€«á‹"); 
    }
    }
    window.onload = renderMenu;
</script>
</body>
</html>
